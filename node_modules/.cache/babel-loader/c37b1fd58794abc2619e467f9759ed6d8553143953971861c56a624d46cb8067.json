{"ast":null,"code":"import { jwtDecode } from \"jwt-decode\";\nconst NOMEAPP = 'eshoplpe';\nexport const getToken = () => {\n  const localStorageAutenticacao = localStorage.getItem(NOMEAPP + '/autenticacao');\n  const autenticacao = localStorageAutenticacao ? JSON.parse(localStorageAutenticacao) : null;\n  if (autenticacao === null) {\n    return null;\n  }\n  if (autenticacao.auth === false) {\n    return null;\n  } else {\n    let decoded = jwtDecode(autenticacao.token);\n    if (decoded.exp <= Math.floor(new Date() / 1000)) {\n      console.log('Token expirado');\n      logout();\n      throw \"Token expirado\";\n    } else {\n      return autenticacao.token;\n    }\n  }\n};\nexport const getUsuario = () => {\n  const localStorageAutenticacao = localStorage.getItem(NOMEAPP + '/autenticacao');\n  const autenticacao = localStorageAutenticacao ? JSON.parse(localStorageAutenticacao) : null;\n  if (autenticacao === null) {\n    return null;\n  }\n  if (autenticacao.auth === false) {\n    return null;\n  } else {\n    let decoded = jwtDecode(autenticacao.token);\n    if (decoded.exp <= Math.floor(new Date() / 1000)) {\n      console.log('Token expirado');\n      logout();\n      throw \"Token expirado\";\n    } else {\n      return decoded.usuario;\n    }\n  }\n};\nexport const gravaAutenticacao = json => {\n  localStorage.setItem(NOMEAPP + '/autenticacao', JSON.stringify(json));\n};\nexport const logout = () => {\n  localStorage.setItem(NOMEAPP + '/autenticacao', JSON.stringify({\n    \"auth\": false,\n    \"token\": \"\"\n  }));\n};","map":{"version":3,"names":["jwtDecode","NOMEAPP","getToken","localStorageAutenticacao","localStorage","getItem","autenticacao","JSON","parse","auth","decoded","token","exp","Math","floor","Date","console","log","logout","getUsuario","usuario","gravaAutenticacao","json","setItem","stringify"],"sources":["C:/Users/anita/Music/LPE/Frontend/src/seguranca/Autenticacao.jsx"],"sourcesContent":["import { jwtDecode } from \"jwt-decode\";\r\n\r\nconst NOMEAPP = 'eshoplpe';\r\n\r\nexport const getToken = () => {\r\n    const localStorageAutenticacao = localStorage.getItem(NOMEAPP + '/autenticacao');\r\n    const autenticacao = localStorageAutenticacao ?\r\n        JSON.parse(localStorageAutenticacao) :\r\n        null;\r\n    if (autenticacao === null) {\r\n        return null;\r\n    }\r\n    if (autenticacao.auth === false) {\r\n        return null;\r\n    } else {\r\n        let decoded = jwtDecode(autenticacao.token);\r\n        if (decoded.exp <= Math.floor(new Date() / 1000)){\r\n            console.log('Token expirado');\r\n            logout();\r\n            throw \"Token expirado\";\r\n        } else {\r\n            return autenticacao.token;\r\n        }\r\n    }\r\n}\r\n\r\nexport const getUsuario = () => {\r\n    const localStorageAutenticacao = localStorage.getItem(NOMEAPP + '/autenticacao');\r\n    const autenticacao = localStorageAutenticacao ?\r\n        JSON.parse(localStorageAutenticacao) :\r\n        null;\r\n    if (autenticacao === null) {\r\n        return null;\r\n    }\r\n    if (autenticacao.auth === false) {\r\n        return null;\r\n    } else {\r\n        let decoded = jwtDecode(autenticacao.token);\r\n        if (decoded.exp <= Math.floor(new Date() / 1000)){\r\n            console.log('Token expirado');\r\n            logout();\r\n            throw \"Token expirado\";\r\n        } else {\r\n            return decoded.usuario;\r\n        }\r\n    }\r\n}\r\n\r\nexport const gravaAutenticacao = (json) => {\r\n    localStorage.setItem(NOMEAPP + '/autenticacao', JSON.stringify(json));\r\n}\r\n\r\nexport const logout = () => {\r\n    localStorage.setItem(NOMEAPP + '/autenticacao', JSON.stringify(\r\n        {\"auth\": false, \"token\": \"\"}\r\n    ));\r\n}"],"mappings":"AAAA,SAASA,SAAS,QAAQ,YAAY;AAEtC,MAAMC,OAAO,GAAG,UAAU;AAE1B,OAAO,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAC1B,MAAMC,wBAAwB,GAAGC,YAAY,CAACC,OAAO,CAACJ,OAAO,GAAG,eAAe,CAAC;EAChF,MAAMK,YAAY,GAAGH,wBAAwB,GACzCI,IAAI,CAACC,KAAK,CAACL,wBAAwB,CAAC,GACpC,IAAI;EACR,IAAIG,YAAY,KAAK,IAAI,EAAE;IACvB,OAAO,IAAI;EACf;EACA,IAAIA,YAAY,CAACG,IAAI,KAAK,KAAK,EAAE;IAC7B,OAAO,IAAI;EACf,CAAC,MAAM;IACH,IAAIC,OAAO,GAAGV,SAAS,CAACM,YAAY,CAACK,KAAK,CAAC;IAC3C,IAAID,OAAO,CAACE,GAAG,IAAIC,IAAI,CAACC,KAAK,CAAC,IAAIC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAC;MAC7CC,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;MAC7BC,MAAM,CAAC,CAAC;MACR,MAAM,gBAAgB;IAC1B,CAAC,MAAM;MACH,OAAOZ,YAAY,CAACK,KAAK;IAC7B;EACJ;AACJ,CAAC;AAED,OAAO,MAAMQ,UAAU,GAAGA,CAAA,KAAM;EAC5B,MAAMhB,wBAAwB,GAAGC,YAAY,CAACC,OAAO,CAACJ,OAAO,GAAG,eAAe,CAAC;EAChF,MAAMK,YAAY,GAAGH,wBAAwB,GACzCI,IAAI,CAACC,KAAK,CAACL,wBAAwB,CAAC,GACpC,IAAI;EACR,IAAIG,YAAY,KAAK,IAAI,EAAE;IACvB,OAAO,IAAI;EACf;EACA,IAAIA,YAAY,CAACG,IAAI,KAAK,KAAK,EAAE;IAC7B,OAAO,IAAI;EACf,CAAC,MAAM;IACH,IAAIC,OAAO,GAAGV,SAAS,CAACM,YAAY,CAACK,KAAK,CAAC;IAC3C,IAAID,OAAO,CAACE,GAAG,IAAIC,IAAI,CAACC,KAAK,CAAC,IAAIC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAC;MAC7CC,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;MAC7BC,MAAM,CAAC,CAAC;MACR,MAAM,gBAAgB;IAC1B,CAAC,MAAM;MACH,OAAOR,OAAO,CAACU,OAAO;IAC1B;EACJ;AACJ,CAAC;AAED,OAAO,MAAMC,iBAAiB,GAAIC,IAAI,IAAK;EACvClB,YAAY,CAACmB,OAAO,CAACtB,OAAO,GAAG,eAAe,EAAEM,IAAI,CAACiB,SAAS,CAACF,IAAI,CAAC,CAAC;AACzE,CAAC;AAED,OAAO,MAAMJ,MAAM,GAAGA,CAAA,KAAM;EACxBd,YAAY,CAACmB,OAAO,CAACtB,OAAO,GAAG,eAAe,EAAEM,IAAI,CAACiB,SAAS,CAC1D;IAAC,MAAM,EAAE,KAAK;IAAE,OAAO,EAAE;EAAE,CAC/B,CAAC,CAAC;AACN,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}