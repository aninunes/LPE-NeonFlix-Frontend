{"ast":null,"code":"import{useState,useEffect}from'react';import{Navigate}from'react-router-dom';import{gravaAutenticacao,getToken}from'../../../seguranca/Autenticacao';import Carregando from'../../comuns/Carregando';import Alerta from'../../comuns/Alerta';import'./signin.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const[email,setEmail]=useState(\"\");const[senha,setSenha]=useState(\"\");const[alerta,setAlerta]=useState({status:\"\",message:\"\"});const[autenticado,setAutenticado]=useState(false);const[carregando,setCarregando]=useState(false);const acaoLogin=async e=>{e.preventDefault();try{const body={email:email,senha:senha};setCarregando(true);await fetch(\"\".concat(process.env.REACT_APP_ENDERECO_API,\"/login\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)}).then(response=>response.json()).then(json=>{if(json.auth===false){setAlerta({status:\"error\",message:json.message});}if(json.auth===true){setAutenticado(true);gravaAutenticacao(json);}});}catch(err){console.error(err.message);setAlerta({status:\"error\",message:err.message});}finally{setCarregando(false);}};useEffect(()=>{try{const token=getToken();if(token!=null){setAutenticado(true);}}catch(err){setAlerta({status:\"error\",message:err});}},[]);if(autenticado===true){return/*#__PURE__*/_jsx(Navigate,{to:\"/privado\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsx(Carregando,{carregando:carregando,children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"body\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(Alerta,{alerta:alerta}),/*#__PURE__*/_jsx(\"main\",{className:\"form-signin\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:acaoLogin,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"h3 mb-3 fw-normal\",children:\"Login de usu\\xE1rio\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"floatingInput\",placeholder:\"Nome de usu\\xE1rio\",value:email,name:\"email\",onChange:e=>setEmail(e.target.value)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"floatingInput\",children:\"Email\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"floatingPassword\",placeholder:\"Senha\",value:senha,name:\"senha\",onChange:e=>setSenha(e.target.value)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"floatingPassword\",children:\"Senha\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"w-100 btn btn-lg btn-primary\",type:\"submit\",children:\"Efetuar login\"})]})})]})})})});}export default Login;","map":{"version":3,"names":["useState","useEffect","Navigate","gravaAutenticacao","getToken","Carregando","Alerta","jsx","_jsx","jsxs","_jsxs","Login","email","setEmail","senha","setSenha","alerta","setAlerta","status","message","autenticado","setAutenticado","carregando","setCarregando","acaoLogin","e","preventDefault","body","fetch","concat","process","env","REACT_APP_ENDERECO_API","method","headers","JSON","stringify","then","response","json","auth","err","console","error","token","to","className","children","onSubmit","type","id","placeholder","value","name","onChange","target","htmlFor"],"sources":["C:/Users/anita/Music/LPE/Frontend/src/componentes/telas/login/Login.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { gravaAutenticacao, getToken } from '../../../seguranca/Autenticacao';\r\nimport Carregando from '../../comuns/Carregando';\r\nimport Alerta from '../../comuns/Alerta';\r\nimport './signin.css';\r\n\r\nfunction Login() {\r\n\r\n    const [email, setEmail] = useState(\"\");\r\n    const [senha, setSenha] = useState(\"\");\r\n    const [alerta, setAlerta] = useState({ status: \"\", message: \"\" });\r\n    const [autenticado, setAutenticado] = useState(false);\r\n    const [carregando, setCarregando] = useState(false);\r\n\r\n    const acaoLogin = async e => {\r\n\r\n        e.preventDefault();\r\n\r\n        try {\r\n            const body = {\r\n                email: email,\r\n                senha: senha\r\n            };\r\n            setCarregando(true);\r\n            await fetch(`${process.env.REACT_APP_ENDERECO_API}/login`, {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify(body),\r\n            }).then(response => response.json())\r\n                .then(json => {\r\n                    if (json.auth === false) {\r\n                        setAlerta({ status: \"error\", message: json.message })\r\n                    }\r\n                    if (json.auth === true) {\r\n                        setAutenticado(true);\r\n                        gravaAutenticacao(json);\r\n                    }\r\n                });\r\n        } catch (err) {\r\n            console.error(err.message);\r\n            setAlerta({ status: \"error\", message: err.message })\r\n        } finally {\r\n            setCarregando(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        try {\r\n            const token = getToken();\r\n            if (token != null) {\r\n                setAutenticado(true);\r\n            }\r\n        } catch (err) {\r\n            setAlerta({ status: \"error\", message: err })\r\n        }\r\n    }, []);\r\n\r\n    if (autenticado === true) {\r\n        return <Navigate to=\"/privado\" />\r\n    }\r\n\r\n    return (\r\n        <div className=\"login-container\">\r\n            <Carregando carregando={carregando}>\r\n                <div>\r\n                    <body className=\"text-center\">\r\n                        <Alerta alerta={alerta} />\r\n                        <main className=\"form-signin\">\r\n                            <form onSubmit={acaoLogin}>\r\n                                <h1 className=\"h3 mb-3 fw-normal\">Login de usuário</h1>\r\n\r\n                                <div className=\"form-floating\">\r\n                                    <input type=\"text\" className=\"form-control\" id=\"floatingInput\" placeholder=\"Nome de usuário\"\r\n                                        value={email}\r\n                                        name=\"email\"\r\n                                        onChange={e => setEmail(e.target.value)} />\r\n                                    <label htmlFor=\"floatingInput\">Email</label>\r\n                                </div>\r\n                                <div className=\"form-floating\">\r\n                                    <input type=\"password\" className=\"form-control\" id=\"floatingPassword\" placeholder=\"Senha\"\r\n                                        value={senha}\r\n                                        name=\"senha\"\r\n                                        onChange={e => setSenha(e.target.value)} />\r\n                                    <label htmlFor=\"floatingPassword\">Senha</label>\r\n                                </div>\r\n                                <button className=\"w-100 btn btn-lg btn-primary\" type=\"submit\">Efetuar login</button>\r\n                            </form>\r\n                        </main>\r\n                    </body>\r\n                </div>\r\n            </Carregando>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}