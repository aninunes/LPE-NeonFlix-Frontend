{"ast":null,"code":"import{jwtDecode}from\"jwt-decode\";const NOMEAPP='eshoplpe';export const getToken=()=>{const localStorageAutenticacao=localStorage.getItem(NOMEAPP+'/autenticacao');const autenticacao=localStorageAutenticacao?JSON.parse(localStorageAutenticacao):null;if(autenticacao===null){return null;}if(autenticacao.auth===false){return null;}else{let decoded=jwtDecode(autenticacao.token);if(decoded.exp<=Math.floor(new Date()/1000)){console.log('Token expirado');logout();throw\"Token expirado\";}else{return autenticacao.token;}}};export const getUsuario=()=>{const localStorageAutenticacao=localStorage.getItem(NOMEAPP+'/autenticacao');const autenticacao=localStorageAutenticacao?JSON.parse(localStorageAutenticacao):null;if(autenticacao===null){return null;}if(autenticacao.auth===false){return null;}else{let decoded=jwtDecode(autenticacao.token);if(decoded.exp<=Math.floor(new Date()/1000)){console.log('Token expirado');logout();throw\"Token expirado\";}else{return decoded.usuario;}}};export const gravaAutenticacao=json=>{localStorage.setItem(NOMEAPP+'/autenticacao',JSON.stringify(json));};export const logout=()=>{localStorage.setItem(NOMEAPP+'/autenticacao',JSON.stringify({\"auth\":false,\"token\":\"\"}));};","map":{"version":3,"names":["jwtDecode","NOMEAPP","getToken","localStorageAutenticacao","localStorage","getItem","autenticacao","JSON","parse","auth","decoded","token","exp","Math","floor","Date","console","log","logout","getUsuario","usuario","gravaAutenticacao","json","setItem","stringify"],"sources":["C:/Users/anita/Music/LPE/Frontend/src/seguranca/Autenticacao.jsx"],"sourcesContent":["import { jwtDecode } from \"jwt-decode\";\r\n\r\nconst NOMEAPP = 'eshoplpe';\r\n\r\nexport const getToken = () => {\r\n    const localStorageAutenticacao = localStorage.getItem(NOMEAPP + '/autenticacao');\r\n    const autenticacao = localStorageAutenticacao ?\r\n        JSON.parse(localStorageAutenticacao) :\r\n        null;\r\n    if (autenticacao === null) {\r\n        return null;\r\n    }\r\n    if (autenticacao.auth === false) {\r\n        return null;\r\n    } else {\r\n        let decoded = jwtDecode(autenticacao.token);\r\n        if (decoded.exp <= Math.floor(new Date() / 1000)){\r\n            console.log('Token expirado');\r\n            logout();\r\n            throw \"Token expirado\";\r\n        } else {\r\n            return autenticacao.token;\r\n        }\r\n    }\r\n}\r\n\r\nexport const getUsuario = () => {\r\n    const localStorageAutenticacao = localStorage.getItem(NOMEAPP + '/autenticacao');\r\n    const autenticacao = localStorageAutenticacao ?\r\n        JSON.parse(localStorageAutenticacao) :\r\n        null;\r\n    if (autenticacao === null) {\r\n        return null;\r\n    }\r\n    if (autenticacao.auth === false) {\r\n        return null;\r\n    } else {\r\n        let decoded = jwtDecode(autenticacao.token);\r\n        if (decoded.exp <= Math.floor(new Date() / 1000)){\r\n            console.log('Token expirado');\r\n            logout();\r\n            throw \"Token expirado\";\r\n        } else {\r\n            return decoded.usuario;\r\n        }\r\n    }\r\n}\r\n\r\nexport const gravaAutenticacao = (json) => {\r\n    localStorage.setItem(NOMEAPP + '/autenticacao', JSON.stringify(json));\r\n}\r\n\r\nexport const logout = () => {\r\n    localStorage.setItem(NOMEAPP + '/autenticacao', JSON.stringify(\r\n        {\"auth\": false, \"token\": \"\"}\r\n    ));\r\n}"],"mappings":"AAAA,OAASA,SAAS,KAAQ,YAAY,CAEtC,KAAM,CAAAC,OAAO,CAAG,UAAU,CAE1B,MAAO,MAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAAAC,wBAAwB,CAAGC,YAAY,CAACC,OAAO,CAACJ,OAAO,CAAG,eAAe,CAAC,CAChF,KAAM,CAAAK,YAAY,CAAGH,wBAAwB,CACzCI,IAAI,CAACC,KAAK,CAACL,wBAAwB,CAAC,CACpC,IAAI,CACR,GAAIG,YAAY,GAAK,IAAI,CAAE,CACvB,MAAO,KAAI,CACf,CACA,GAAIA,YAAY,CAACG,IAAI,GAAK,KAAK,CAAE,CAC7B,MAAO,KAAI,CACf,CAAC,IAAM,CACH,GAAI,CAAAC,OAAO,CAAGV,SAAS,CAACM,YAAY,CAACK,KAAK,CAAC,CAC3C,GAAID,OAAO,CAACE,GAAG,EAAIC,IAAI,CAACC,KAAK,CAAC,GAAI,CAAAC,IAAI,CAAC,CAAC,CAAG,IAAI,CAAC,CAAC,CAC7CC,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC,CAC7BC,MAAM,CAAC,CAAC,CACR,KAAM,gBAAgB,CAC1B,CAAC,IAAM,CACH,MAAO,CAAAZ,YAAY,CAACK,KAAK,CAC7B,CACJ,CACJ,CAAC,CAED,MAAO,MAAM,CAAAQ,UAAU,CAAGA,CAAA,GAAM,CAC5B,KAAM,CAAAhB,wBAAwB,CAAGC,YAAY,CAACC,OAAO,CAACJ,OAAO,CAAG,eAAe,CAAC,CAChF,KAAM,CAAAK,YAAY,CAAGH,wBAAwB,CACzCI,IAAI,CAACC,KAAK,CAACL,wBAAwB,CAAC,CACpC,IAAI,CACR,GAAIG,YAAY,GAAK,IAAI,CAAE,CACvB,MAAO,KAAI,CACf,CACA,GAAIA,YAAY,CAACG,IAAI,GAAK,KAAK,CAAE,CAC7B,MAAO,KAAI,CACf,CAAC,IAAM,CACH,GAAI,CAAAC,OAAO,CAAGV,SAAS,CAACM,YAAY,CAACK,KAAK,CAAC,CAC3C,GAAID,OAAO,CAACE,GAAG,EAAIC,IAAI,CAACC,KAAK,CAAC,GAAI,CAAAC,IAAI,CAAC,CAAC,CAAG,IAAI,CAAC,CAAC,CAC7CC,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC,CAC7BC,MAAM,CAAC,CAAC,CACR,KAAM,gBAAgB,CAC1B,CAAC,IAAM,CACH,MAAO,CAAAR,OAAO,CAACU,OAAO,CAC1B,CACJ,CACJ,CAAC,CAED,MAAO,MAAM,CAAAC,iBAAiB,CAAIC,IAAI,EAAK,CACvClB,YAAY,CAACmB,OAAO,CAACtB,OAAO,CAAG,eAAe,CAAEM,IAAI,CAACiB,SAAS,CAACF,IAAI,CAAC,CAAC,CACzE,CAAC,CAED,MAAO,MAAM,CAAAJ,MAAM,CAAGA,CAAA,GAAM,CACxBd,YAAY,CAACmB,OAAO,CAACtB,OAAO,CAAG,eAAe,CAAEM,IAAI,CAACiB,SAAS,CAC1D,CAAC,MAAM,CAAE,KAAK,CAAE,OAAO,CAAE,EAAE,CAC/B,CAAC,CAAC,CACN,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}