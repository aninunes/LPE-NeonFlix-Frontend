{"ast":null,"code":"import{useState,useEffect}from\"react\";import GeneroContext from\"./GeneroContext\";import{getGenerosAPI,getGeneroPorIdAPI,deleteGeneroPorIdAPI,cadastrarGeneroAPI}from\"../../../servicos/GeneroServico\";import Tabela from\"./Tabela\";import Carregando from\"../../comuns/Carregando\";import Form from\"./Form\";import WithAuth from\"../../../seguranca/WithAuth\";import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Genero(){let navigate=useNavigate();const[alerta,setAlerta]=useState({status:\"\",message:\"\"});const[listaObjetos,setListaObjetos]=useState([]);const[editar,setEditar]=useState(false);const[objeto,setObjeto]=useState({id:\"\",nome:\"\",descricao:\"\"});const[carregando,setCarregando]=useState(true);const novoObjeto=()=>{setEditar(false);setAlerta({status:\"\",message:\"\"});setObjeto({id:0,nome:\"\",descricao:\"\"});};const editarObjeto=async id=>{try{setObjeto(await getGeneroPorIdAPI(id));setEditar(true);setAlerta({status:\"\",message:\"\"});}catch(err){window.location.reload();navigate(\"/login\",{replace:true});}};const acaoCadastrar=async e=>{e.preventDefault();let metodo=editar?\"PUT\":\"POST\";try{let retornoAPI=await cadastrarGeneroAPI(metodo,objeto);setAlerta({status:retornoAPI.status,message:retornoAPI.message});setObjeto(retornoAPI.objeto);if(!editar){setEditar(true);}}catch(err){window.location.reload();navigate(\"/login\",{replace:true});}recuperaGeneros();};const handleChange=e=>{const name=e.target.name;const value=e.target.value;setObjeto({...objeto,[name]:value});};const recuperaGeneros=async()=>{try{setCarregando(true);setListaObjetos(await getGenerosAPI());setCarregando(false);}catch(err){window.location.reload();navigate(\"/login\",{replace:true});}};const remover=async id=>{if(window.confirm('Deseja remover este objeto?')){try{let retornoAPI=await deleteGeneroPorIdAPI(id);setAlerta({status:retornoAPI.status,message:retornoAPI.message});recuperaGeneros();}catch(err){window.location.reload();navigate(\"/login\",{replace:true});}}};useEffect(()=>{recuperaGeneros();},[]);return/*#__PURE__*/_jsxs(GeneroContext.Provider,{value:{alerta,listaObjetos,remover,objeto,editar,acaoCadastrar,handleChange,novoObjeto,editarObjeto},children:[/*#__PURE__*/_jsx(Carregando,{carregando:carregando,children:/*#__PURE__*/_jsx(Tabela,{})}),/*#__PURE__*/_jsx(Form,{})]});}export default WithAuth(Genero);","map":{"version":3,"names":["useState","useEffect","GeneroContext","getGenerosAPI","getGeneroPorIdAPI","deleteGeneroPorIdAPI","cadastrarGeneroAPI","Tabela","Carregando","Form","WithAuth","useNavigate","jsx","_jsx","jsxs","_jsxs","Genero","navigate","alerta","setAlerta","status","message","listaObjetos","setListaObjetos","editar","setEditar","objeto","setObjeto","id","nome","descricao","carregando","setCarregando","novoObjeto","editarObjeto","err","window","location","reload","replace","acaoCadastrar","e","preventDefault","metodo","retornoAPI","recuperaGeneros","handleChange","name","target","value","remover","confirm","Provider","children"],"sources":["C:/Users/anita/Music/LPE/Frontend/src/componentes/telas/genero/Genero.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport GeneroContext from \"./GeneroContext\";\r\nimport {\r\n    getGenerosAPI, getGeneroPorIdAPI,\r\n    deleteGeneroPorIdAPI, cadastrarGeneroAPI\r\n} from \"../../../servicos/GeneroServico\";\r\nimport Tabela from \"./Tabela\";\r\nimport Carregando from \"../../comuns/Carregando\";\r\nimport Form from \"./Form\";\r\nimport WithAuth from \"../../../seguranca/WithAuth\";\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction Genero() {\r\n\r\n    let navigate = useNavigate();\r\n\r\n    const [alerta, setAlerta] = useState({ status: \"\", message: \"\" });\r\n    const [listaObjetos, setListaObjetos] = useState([]);\r\n    const [editar, setEditar] = useState(false);\r\n    const [objeto, setObjeto] = useState({ id: \"\", nome: \"\", descricao: \"\" });\r\n    const [carregando, setCarregando] = useState(true);\r\n\r\n    const novoObjeto = () => {\r\n        setEditar(false);\r\n        setAlerta({ status: \"\", message: \"\" });\r\n        setObjeto({ id: 0, nome: \"\", descricao: \"\" });\r\n    }\r\n\r\n    const editarObjeto = async id => {\r\n        try {\r\n            setObjeto(await getGeneroPorIdAPI(id));\r\n            setEditar(true);\r\n            setAlerta({ status: \"\", message: \"\" });\r\n        } catch (err) {\r\n            window.location.reload();\r\n            navigate(\"/login\", { replace: true });\r\n        }\r\n    }\r\n\r\n    const acaoCadastrar = async e => {\r\n        e.preventDefault();\r\n        let metodo = editar ? \"PUT\" : \"POST\";\r\n        try {\r\n            let retornoAPI = await cadastrarGeneroAPI(metodo, objeto);\r\n            setAlerta({ status: retornoAPI.status, message: retornoAPI.message });\r\n            setObjeto(retornoAPI.objeto);\r\n            if (!editar) {\r\n                setEditar(true);\r\n            }\r\n        } catch (err) {\r\n            window.location.reload();\r\n            navigate(\"/login\", { replace: true });\r\n        }\r\n        recuperaGeneros();\r\n    }\r\n\r\n    const handleChange = (e) => {\r\n        const name = e.target.name;\r\n        const value = e.target.value;\r\n        setObjeto({ ...objeto, [name]: value });\r\n    }\r\n\r\n    const recuperaGeneros = async () => {\r\n        try {\r\n            setCarregando(true);\r\n            setListaObjetos(await getGenerosAPI());\r\n            setCarregando(false);\r\n        } catch (err) {\r\n            window.location.reload();\r\n            navigate(\"/login\", { replace: true });\r\n        }\r\n    }\r\n\r\n    const remover = async id => {\r\n        if (window.confirm('Deseja remover este objeto?')) {\r\n            try {\r\n                let retornoAPI = await deleteGeneroPorIdAPI(id);\r\n                setAlerta({ status: retornoAPI.status, message: retornoAPI.message });\r\n                recuperaGeneros();\r\n            } catch (err) {\r\n                window.location.reload();\r\n                navigate(\"/login\", { replace: true });\r\n            }\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        recuperaGeneros();\r\n    }, []);\r\n\r\n\r\n    return (\r\n        <GeneroContext.Provider value={{\r\n            alerta, listaObjetos, remover,\r\n            objeto, editar, acaoCadastrar, handleChange, novoObjeto, editarObjeto\r\n        }}>\r\n            <Carregando carregando={carregando}>\r\n                <Tabela />\r\n            </Carregando>\r\n            <Form />\r\n        </GeneroContext.Provider>\r\n    )\r\n}\r\n\r\nexport default WithAuth(Genero);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}